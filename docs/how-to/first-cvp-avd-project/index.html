


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Arista Validated Design collection's documentation">
      
      
      
        <meta name="author" content="Arista Ansible Team">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.1">
    
    
      
        <title>Build your first AVD & CVP project - Arista AVD collection</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.a676eddb.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.material.css">
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation-process" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="Arista AVD collection" class="md-header-nav__button md-logo" aria-label="Arista AVD collection">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Arista AVD collection
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Build your first AVD & CVP project
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/aristanetworks/ansible-avd/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    AVD on Github
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Arista AVD collection" class="md-nav__button md-logo" aria-label="Arista AVD collection">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    Arista AVD collection
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/aristanetworks/ansible-avd/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    AVD on Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Release Notes
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Release Notes" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/1.1.x/" title="1.1.x" class="md-nav__link">
      1.1.x
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/1.0.x/" title="1.0.x" class="md-nav__link">
      1.0.x
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Installation
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Installation" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/requirements/" title="Requirements" class="md-nav__link">
      Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/setup-environement/" title="Setup environment" class="md-nav__link">
      Setup environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/setup-galaxy/" title="Ansible-galaxy installation" class="md-nav__link">
      Ansible-galaxy installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/setup-git/" title="Git installation" class="md-nav__link">
      Git installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/development/" title="Development tips & tricks" class="md-nav__link">
      Development tips & tricks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      How-To
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="How-To" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        How-To
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../first-project/" title="Build your first AVD project" class="md-nav__link">
      Build your first AVD project
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Build your first AVD & CVP project
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Build your first AVD & CVP project" class="md-nav__link md-nav__link--active">
      Build your first AVD & CVP project
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation-process" class="md-nav__link">
    Installation Process
  </a>
  
    <nav class="md-nav" aria-label="Installation Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#demonstration-requirements" class="md-nav__link">
    Demonstration requirements
  </a>
  
    <nav class="md-nav" aria-label="Demonstration requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    Components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-address-management" class="md-nav__link">
    IP Address management
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-python-environment" class="md-nav__link">
    Configure Python environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-dhcp-server-on-cloudvision" class="md-nav__link">
    Configure DHCP server on CloudVision
  </a>
  
    <nav class="md-nav" aria-label="Configure DHCP server on CloudVision">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ansible-playbook-approach" class="md-nav__link">
    Ansible playbook approach
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-approach" class="md-nav__link">
    Manual approach
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-inventory" class="md-nav__link">
    Update Inventory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-fabric-information" class="md-nav__link">
    Update Fabric information
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demo-script" class="md-nav__link">
    Demo script
  </a>
  
    <nav class="md-nav" aria-label="Demo script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#power-up-devices" class="md-nav__link">
    Power up devices
  </a>
  
    <nav class="md-nav" aria-label="Power up devices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-there-is-no-container" class="md-nav__link">
    Check there is no container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-configlets-are-not-present" class="md-nav__link">
    Check Configlets are not present
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-custom-configlets-to-cloudvision" class="md-nav__link">
    Upload custom configlets to Cloudvision.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-ansible-playbook-to-rollout-evpn-fabric" class="md-nav__link">
    Run Ansible playbook to rollout EVPN Fabric
  </a>
  
    <nav class="md-nav" aria-label="Run Ansible playbook to rollout EVPN Fabric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playbook-overview" class="md-nav__link">
    Playbook overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-playbook" class="md-nav__link">
    Run Playbook
  </a>
  
    <nav class="md-nav" aria-label="Run Playbook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-eos-configuration" class="md-nav__link">
    Generate EOS Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provision-cloudvision-server" class="md-nav__link">
    Provision CloudVision Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execute-pending-tasks-using-a-change-control" class="md-nav__link">
    Execute Pending tasks using a change control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyze-result" class="md-nav__link">
    Analyze result
  </a>
  
    <nav class="md-nav" aria-label="Analyze result">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topology-update" class="md-nav__link">
    Topology Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configlet-list" class="md-nav__link">
    Configlet list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-device-status" class="md-nav__link">
    Check device status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bgp-status" class="md-nav__link">
    BGP Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vxlan-address-table" class="md-nav__link">
    VXLAN address table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-device-connectivity" class="md-nav__link">
    Check device connectivity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revert-topology" class="md-nav__link">
    Revert topology
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-with-nat/" title="Use NAT to access eAPI" class="md-nav__link">
      Use NAT to access eAPI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tower-integration/" title="AWX & Tower Integration" class="md-nav__link">
      AWX & Tower Integration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Roles documentation
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Roles documentation" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Roles documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../roles/eos_l3ls_evpn/" title="eos_l3ls_evpn" class="md-nav__link">
      eos_l3ls_evpn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../roles/eos_cli_config_gen/" title="eos_cli_config_gen" class="md-nav__link">
      eos_cli_config_gen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../roles/cvp_configlet_upload/" title="cvp_configlet_upload" class="md-nav__link">
      cvp_configlet_upload
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../roles/eos_config_deploy_cvp/" title="eos_config_deploy_cvp" class="md-nav__link">
      eos_config_deploy_cvp
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../roles/eos_config_deploy_eapi/" title="eos_config_deploy_eapi" class="md-nav__link">
      eos_config_deploy_eapi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../roles/eos_validate_state/" title="eos_validate_state" class="md-nav__link">
      eos_validate_state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../roles/build_output_folders/" title="build_output_folders" class="md-nav__link">
      build_output_folders
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../roles/upgrade_tools/" title="upgrade_tools" class="md-nav__link">
      upgrade_tools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Modules documentation
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Modules documentation" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Modules documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../modules/inventory_to_container.rst/" title="Module Inventory to containers" class="md-nav__link">
      Module Inventory to containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../modules/configlet_build_config.rst/" title="Module Configlet Build configuration" class="md-nav__link">
      Module Configlet Build configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      External resources
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="External resources" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        External resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="https://docs.ansible.com/ansible/latest/user_guide/collections_using.html" title="Ansible collection user guide" class="md-nav__link">
      Ansible collection user guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://docs.ansible.com/ansible/latest/user_guide/index.html" title="Ansible User guide" class="md-nav__link">
      Ansible User guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      About
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="About" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/" title="Contribution Guide" class="md-nav__link">
      Contribution Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://galaxy.ansible.com/arista/cvp" title="Ansible Galaxy page" class="md-nav__link">
      Ansible Galaxy page
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/aristanetworks/ansible-avd" title="Arista AVD Modules" class="md-nav__link">
      Arista AVD Modules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/arista-netdevops-community/avd-install" title="Arista Installation Script" class="md-nav__link">
      Arista Installation Script
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/aristanetworks/netdevops-examples" title="Arista Automation Examples" class="md-nav__link">
      Arista Automation Examples
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation-process" class="md-nav__link">
    Installation Process
  </a>
  
    <nav class="md-nav" aria-label="Installation Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#demonstration-requirements" class="md-nav__link">
    Demonstration requirements
  </a>
  
    <nav class="md-nav" aria-label="Demonstration requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    Components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-address-management" class="md-nav__link">
    IP Address management
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-python-environment" class="md-nav__link">
    Configure Python environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-dhcp-server-on-cloudvision" class="md-nav__link">
    Configure DHCP server on CloudVision
  </a>
  
    <nav class="md-nav" aria-label="Configure DHCP server on CloudVision">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ansible-playbook-approach" class="md-nav__link">
    Ansible playbook approach
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-approach" class="md-nav__link">
    Manual approach
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-inventory" class="md-nav__link">
    Update Inventory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-fabric-information" class="md-nav__link">
    Update Fabric information
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demo-script" class="md-nav__link">
    Demo script
  </a>
  
    <nav class="md-nav" aria-label="Demo script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#power-up-devices" class="md-nav__link">
    Power up devices
  </a>
  
    <nav class="md-nav" aria-label="Power up devices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-there-is-no-container" class="md-nav__link">
    Check there is no container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-configlets-are-not-present" class="md-nav__link">
    Check Configlets are not present
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-custom-configlets-to-cloudvision" class="md-nav__link">
    Upload custom configlets to Cloudvision.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-ansible-playbook-to-rollout-evpn-fabric" class="md-nav__link">
    Run Ansible playbook to rollout EVPN Fabric
  </a>
  
    <nav class="md-nav" aria-label="Run Ansible playbook to rollout EVPN Fabric">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#playbook-overview" class="md-nav__link">
    Playbook overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-playbook" class="md-nav__link">
    Run Playbook
  </a>
  
    <nav class="md-nav" aria-label="Run Playbook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-eos-configuration" class="md-nav__link">
    Generate EOS Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provision-cloudvision-server" class="md-nav__link">
    Provision CloudVision Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execute-pending-tasks-using-a-change-control" class="md-nav__link">
    Execute Pending tasks using a change control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyze-result" class="md-nav__link">
    Analyze result
  </a>
  
    <nav class="md-nav" aria-label="Analyze result">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#topology-update" class="md-nav__link">
    Topology Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configlet-list" class="md-nav__link">
    Configlet list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-device-status" class="md-nav__link">
    Check device status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bgp-status" class="md-nav__link">
    BGP Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vxlan-address-table" class="md-nav__link">
    VXLAN address table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-device-connectivity" class="md-nav__link">
    Check device connectivity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revert-topology" class="md-nav__link">
    Revert topology
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aristanetworks/ansible-avd/edit/master/docs/docs/how-to/first-cvp-avd-project.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                  <h1>Build your first AVD & CVP project</h1>
                
                <p>This document explain how to customize demo information and how to setup this environment. A complete git repository is available and can be used as a support to this how-to document.</p>
<p><strong>Demo repository:</strong> <a href="https://github.com/arista-netdevops-community/ansible-avd-cloudvision-demo">arista-netdevops-community/ansible-avd-cloudvision-demo</a></p>
<h3 id="installation-process">Installation Process<a class="headerlink" href="#installation-process" title="Permanent link">#</a></h3>
<h4 id="demonstration-requirements">Demonstration requirements<a class="headerlink" href="#demonstration-requirements" title="Permanent link">#</a></h4>
<h5 id="components">Components<a class="headerlink" href="#components" title="Permanent link">#</a></h5>
<ul>
<li>A cloudVision server running version <code>&gt;= 2018.2.5</code></li>
<li>A network topology:
    - Demo is based on a 2 spines / 4 leafs running on GNS3 but should also be configured on EVE-NG platform.
    - Any physical or virtual topology with oob connected to CVP should work.</li>
<li>A python environmentwith CloudVision access.</li>
</ul>
<p><img alt="Lab Topology" src="../../_media/first-cvp-avd-topology.png" /></p>
<h5 id="ip-address-management">IP Address management<a class="headerlink" href="#ip-address-management" title="Permanent link">#</a></h5>
<ul>
<li><strong><em>CloudVision IP address</em></strong>:
    - Cluster interface: eth0 / Should use your own IP address
    - Device interface: eth1 / <code>10.255.0.1/24</code></li>
<li><strong><em>Management Network</em></strong>: <code>10.255.0.0/24</code>
    - <em>DC1-SPINE1</em>: <code>10.255.0.11/24</code>
    - <em>DC1-SPINE2</em>: <code>10.255.0.12/24</code>
    - <em>DC1-LEAF1A</em>: <code>10.255.0.13/24</code>
    - <em>DC1-LEAF1B</em>: <code>10.255.0.14/24</code>
    - <em>DC1-LEAF2A</em>: <code>10.255.0.15/24</code>
    - <em>DC1-LEAF2B</em>: <code>10.255.0.16/24</code>
    - <em>DC1-L2LEAF1A</em>: <code>10.255.0.17/24</code>
    - <em>DC1-L2LEAF2B</em>: <code>10.255.0.18/24</code></li>
<li><strong><em>Default Username &amp; Password</em></strong>:
    - admin / arista123
    - cvpdamin / arista123
    - ansible / ansible</li>
<li><strong><em>Servers configuration</em></strong>:
    - Server 01: eth0 / <code>10.1.10.11/24</code>
    - Server 02: eth0 / <code>10.1.10.12/24</code></li>
</ul>
<p>This management IP addresses are used in a private virtual-network between CloudVision and Arista EOS devices.</p>
<h4 id="configure-python-environment">Configure Python environment<a class="headerlink" href="#configure-python-environment" title="Permanent link">#</a></h4>
<p>Please refer to <a href="../../installation/setup-environement/"><strong>installation page</strong></a> to configure AVD and CVP collection.</p>
<h4 id="configure-dhcp-server-on-cloudvision">Configure DHCP server on CloudVision<a class="headerlink" href="#configure-dhcp-server-on-cloudvision" title="Permanent link">#</a></h4>
<p>In this scenario, we use CloudVision (CV) as ZTP server to provision devices and register them onto CV.</p>
<p>Once you get mac-address of your switches, edit file <code>/etc/dhcp/dhcpd.conf</code> in CloudVision. In this scenario, CV use following address to connect to devices: <code>10.255.0.1</code></p>
<p>If CVP has not been configured to activate ZTP services, it is higly recommended to follow <a href="https://www.arista.com/en/cg-cv/cv-dhcp-service-for-zero-touch-provisioning-ztp-setup">these steps</a></p>
<h5 id="ansible-playbook-approach">Ansible playbook approach<a class="headerlink" href="#ansible-playbook-approach" title="Permanent link">#</a></h5>
<p>An ansible playbook is available to configure CloudVision to act as a DHCP server for your lab:</p>
<ul>
<li>Edit variables in <strong><code>inventory/group_vars/CVP.yml</code></strong></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">vars</span><span class="p">:</span>
<span class="nt">ztp</span><span class="p">:</span>
  <span class="nt">default</span><span class="p">:</span>
    <span class="nt">registration</span><span class="p">:</span> <span class="s">&#39;http://10.255.0.1/ztp/bootstrap&#39;</span>
    <span class="nt">gateway</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.0.3</span>
    <span class="nt">nameservers</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&#39;10.255.0.3&#39;</span>
  <span class="nt">general</span><span class="p">:</span>
    <span class="nt">subnets</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">network</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.0.0</span>
        <span class="nt">netmask</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">255.255.255.0</span>
        <span class="nt">gateway</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.0.3</span>
        <span class="nt">nameservers</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="s">&#39;10.255.0.3&#39;</span>
        <span class="nt">start</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.0.200</span>
        <span class="nt">end</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.0.250</span>
        <span class="nt">lease_time</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">300</span>
  <span class="nt">clients</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">DC1-SPINE1</span>
      <span class="nt">mac</span><span class="p">:</span> <span class="s">&quot;0c:1d:c0:1d:62:01&quot;</span>
      <span class="nt">ip4</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.0.11</span>
</code></pre></div>
<blockquote>
<p>Please ensure to use quote to define your mac-address. Otherwise in some cases, ansible might consider them as HEX string.</p>
</blockquote>
<ul>
<li>Edit information related to ztp host in <strong><code>inventory/inventory.yml</code></strong></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">all</span><span class="p">:</span>
  <span class="nt">children</span><span class="p">:</span>
    <span class="nt">CVP</span><span class="p">:</span>
      <span class="nt">hosts</span><span class="p">:</span>
        <span class="nt">ztp</span><span class="p">:</span>
          <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.83.28.164</span>
          <span class="nt">ansible_user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
          <span class="nt">ansible_password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible</span>
        <span class="nt">cvp</span><span class="p">:</span>
          <span class="nt">ansible_httpapi_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.83.28.164</span>
          <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.83.28.164</span>
          <span class="nt">ansible_user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible</span>
          <span class="nt">ansible_password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible</span>
<span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
          <span class="nt">ansible_httpapi_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">443</span>
          <span class="c1"># Configuration to get Virtual Env information</span>
          <span class="nt">ansible_python_interpreter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$(which python)</span>
</code></pre></div>
<ul>
<li>Run playbook:</li>
</ul>
<div class="highlight"><pre><span></span><code>$ ansible-playbook playbooks/dc1-ztp-configuration.yml

PLAY <span class="o">[</span>Configure ZTP service on CloudVision<span class="o">]</span> *****************

TASK <span class="o">[</span>ztp-setup : Generate DHCPd configuration file<span class="o">]</span> ********
ok: <span class="o">[</span>ztp<span class="o">]</span>

TASK <span class="o">[</span>ztp-setup : Check <span class="p">&amp;</span> activate DHCP service on ztp<span class="o">]</span> *****
ok: <span class="o">[</span>ztp<span class="o">]</span>

TASK <span class="o">[</span>ztp-setup : Restart DHCP service on ztp<span class="o">]</span> **************
changed: <span class="o">[</span>ztp<span class="o">]</span>

PLAY RECAP **************************************************
ztp                        : <span class="nv">ok</span><span class="o">=</span><span class="m">3</span>    <span class="nv">changed</span><span class="o">=</span><span class="m">1</span>    <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span>    <span class="nv">failed</span><span class="o">=</span><span class="m">0</span>    <span class="nv">skipped</span><span class="o">=</span><span class="m">0</span>    <span class="nv">rescued</span><span class="o">=</span><span class="m">0</span>    <span class="nv">ignored</span><span class="o">=</span><span class="m">0</span>
</code></pre></div>
<h5 id="manual-approach">Manual approach<a class="headerlink" href="#manual-approach" title="Permanent link">#</a></h5>
<p>On your DHCP server, create configuration for all your devices. Below is an example for isc-dhcpd server.</p>
<div class="highlight"><pre><span></span><code>$ vi /etc/dhcp/dhcpd.conf

subnet <span class="m">10</span>.255.0.0 netmask <span class="m">255</span>.255.255.0 <span class="o">{</span>
    range <span class="m">10</span>.255.0.200 <span class="m">10</span>.255.0.250<span class="p">;</span>
    option routers <span class="m">10</span>.255.0.1<span class="p">;</span>
    option domain-name-servers <span class="m">10</span>.83.28.52, <span class="m">10</span>.83.29.222<span class="p">;</span>
    option bootfile-name <span class="s2">&quot;http://10.255.0.1/ztp/bootstrap&quot;</span><span class="p">;</span>
<span class="o">}</span>

host DC1-SPINE1 <span class="o">{</span>
    option host-name <span class="s2">&quot;DC1-SPINE1&quot;</span><span class="p">;</span>
    hardware ethernet 0c:1d:c0:1d:62:01<span class="p">;</span>
    fixed-address <span class="m">10</span>.255.0.11<span class="p">;</span>
    option bootfile-name <span class="s2">&quot;http://10.255.0.1/ztp/bootstrap&quot;</span><span class="p">;</span>
<span class="o">}</span>

<span class="o">[</span>...<span class="o">]</span>
</code></pre></div>
<blockquote>
<p>Be sure to update ethernet address to match MAC addresses configured on your switches.</p>
</blockquote>
<p>Then, restart your DHCP server:</p>
<div class="highlight"><pre><span></span><code>$ service dhcpd restart
</code></pre></div>
<p>From here, you can start your devices and let CVP register them into <code>undefined</code> container.</p>
<h4 id="update-inventory">Update Inventory<a class="headerlink" href="#update-inventory" title="Permanent link">#</a></h4>
<p>In the <strong><code>inventory/inventory.yml</code></strong>, update CloudVision information to target your own setup:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># inventory.yml</span>
<span class="nt">all</span><span class="p">:</span>
  <span class="nt">children</span><span class="p">:</span>
    <span class="nt">CVP</span><span class="p">:</span>
      <span class="nt">hosts</span><span class="p">:</span>
        <span class="nt">ztp</span><span class="p">:</span>
          <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.83.28.164</span>
          <span class="nt">ansible_user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
          <span class="nt">ansible_password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible</span>
        <span class="nt">cvp</span><span class="p">:</span>
          <span class="nt">ansible_httpapi_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.83.28.164</span>
          <span class="nt">ansible_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.83.28.164</span>
          <span class="nt">ansible_user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible</span>
          <span class="nt">ansible_password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible</span>
<span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
          <span class="nt">ansible_httpapi_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">443</span>
          <span class="c1"># Configuration to get Virtual Env information</span>
          <span class="nt">ansible_python_interpreter</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$(which python)</span>
</code></pre></div>
<p>Because Ansible will never connect to devices, there is no reason to configure IP address for EOS devices in inventory file.</p>
<h4 id="update-fabric-information">Update Fabric information<a class="headerlink" href="#update-fabric-information" title="Permanent link">#</a></h4>
<blockquote>
<p>If you do not change IP addresses described above, this section is optional.</p>
</blockquote>
<p><strong>Edit <code>DC1_FABRIC.yml</code></strong></p>
<ul>
<li>Add / Remove devices in the list.</li>
<li>Management IP of every device.</li>
</ul>
<p>In this example, we only use <code>spine</code> and <code>l3leafs</code> devices. Below is an example for <code>l3leafs</code>:</p>
<div class="highlight"><pre><span></span><code>  <span class="nt">node_groups</span><span class="p">:</span>
    <span class="nt">DC1_LEAF1</span><span class="p">:</span>
      <span class="nt">bgp_as</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">65101</span>
      <span class="nt">nodes</span><span class="p">:</span>
        <span class="nt">DC1-LEAF1A</span><span class="p">:</span>
          <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
          <span class="nt">mgmt_ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.0.13/24</span>
          <span class="nt">spine_interfaces</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">Ethernet1</span><span class="p p-Indicator">,</span> <span class="nv">Ethernet1</span> <span class="p p-Indicator">]</span>
        <span class="nt">DC1-LEAF1B</span><span class="p">:</span>
          <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
          <span class="nt">mgmt_ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.0.14/24</span>
          <span class="nt">spine_interfaces</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">Ethernet2</span><span class="p p-Indicator">,</span> <span class="nv">Ethernet2</span> <span class="p p-Indicator">]</span>
</code></pre></div>
<p>You can also configure additional configlets available on Cloudvision to deploy additional configuration not generated by AVD project. These configlets <strong>MUST</strong> already be configured on CV side prior to run playbook.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># List of additional CVP configlets to bind to devices and containers</span>
<span class="c1"># Configlets MUST be configured on CVP before running AVD playbooks.</span>
<span class="nt">cv_configlets</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
    <span class="nt">DC1_L3LEAFS</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ASE_GLOBAL-ALIASES</span>
  <span class="nt">devices</span><span class="p">:</span>
    <span class="nt">DC1-L2LEAF1A</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ASE_DEVICE-ALIASES.conf</span>
</code></pre></div>
<p><strong>Edit <code>DC1.yml</code></strong></p>
<ul>
<li>Manage your username. Configured username and password are:<ul>
<li>admin / arista123</li>
<li>cvpdamin / arista123</li>
<li>ansible / ansible</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># local users</span>
<span class="nt">local_users</span><span class="p">:</span>
  <span class="nt">admin</span><span class="p">:</span>
    <span class="nt">privilege</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">network-admin</span>
    <span class="nt">sha512_password</span><span class="p">:</span> <span class="s">&quot;$6$Df86...&quot;</span>
</code></pre></div>
<p>You must use same user on CVP and EOS for the demo.</p>
<ul>
<li>Update Ingest key. Default setup is none.</li>
<li>Update CVP IP address.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Cloud Vision server information</span>
<span class="nt">cvp_instance_ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.255.0.1</span>
<span class="nt">cvp_ingestauth_key</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
</code></pre></div>
<h3 id="demo-script">Demo script<a class="headerlink" href="#demo-script" title="Permanent link">#</a></h3>
<h4 id="power-up-devices">Power up devices<a class="headerlink" href="#power-up-devices" title="Permanent link">#</a></h4>
<p>Power up your devices what ever the solution is. You will see them in the <strong><code>undefined</code></strong> container</p>
<p><img alt="ZTP Registration" src="../../_media/cloudvision-ztpd-devices.png" /></p>
<h5 id="check-there-is-no-container">Check there is no container<a class="headerlink" href="#check-there-is-no-container" title="Permanent link">#</a></h5>
<p><img alt="Streaming Inventory" src="../../_media/streaming-inventory.png" /></p>
<h5 id="check-configlets-are-not-present">Check Configlets are not present<a class="headerlink" href="#check-configlets-are-not-present" title="Permanent link">#</a></h5>
<p><img alt="Configlets" src="../../_media/cloudvision-initial-configlet.png" /></p>
<blockquote>
<p>CloudVision might have some configlets, but none with AVD related content.</p>
</blockquote>
<h4 id="upload-custom-configlets-to-cloudvision">Upload custom configlets to Cloudvision.<a class="headerlink" href="#upload-custom-configlets-to-cloudvision" title="Permanent link">#</a></h4>
<p>These configlets are managed outside of AVD project and can provide additional elements not generated by Arista Validated Design. In this example, we upload a configlet with a list of useful aliases.</p>
<div class="highlight"><pre><span></span><code>$ ansible-playbook playbooks/dc1-upload-configlets.yml
...
</code></pre></div>
<p><img alt="Uploaded Configlets" src="../../_media/cloudvision-uploaded-configlets.png" /></p>
<h4 id="run-ansible-playbook-to-rollout-evpn-fabric">Run Ansible playbook to rollout EVPN Fabric<a class="headerlink" href="#run-ansible-playbook-to-rollout-evpn-fabric" title="Permanent link">#</a></h4>
<p>A set of tags are available, but it is recommended to execute playbook in a row:</p>
<h5 id="playbook-overview">Playbook overview<a class="headerlink" href="#playbook-overview" title="Permanent link">#</a></h5>
<p>Playbook: <a href="https://github.com/arista-netdevops-community/ansible-avd-cloudvision-demo/blob/master/playbooks/dc1-fabric-deploy-cvp.yml"><code>playbooks/dc1-fabric-deploy-cvp.yml</code></a></p>
<p>Playbook manage following actions:</p>
<ul>
<li>Generate Variables for CVP structure:<ul>
<li>List of configlets</li>
<li>Containers topology</li>
<li>List of devices.</li>
</ul>
</li>
<li>Collect CloudVision Facts</li>
<li>Deploy Configlets to CloudVision</li>
<li>Build Containers Topology</li>
<li>Configure devices with correct configlet and container.</li>
<li>Execute created tasks (wait 5 minutes while devices reboot)</li>
</ul>
<p>This playbook supports 2 tags to run demo step by step:</p>
<ul>
<li><strong>build</strong>: Generate configuration.</li>
<li><strong>provision</strong>: Push content to CloudVision.</li>
</ul>
<h5 id="run-playbook">Run Playbook<a class="headerlink" href="#run-playbook" title="Permanent link">#</a></h5>
<h6 id="generate-eos-configuration">Generate EOS Configuration<a class="headerlink" href="#generate-eos-configuration" title="Permanent link">#</a></h6>
<p>Use tag <code>build</code> to only generate</p>
<ul>
<li><a href="https://github.com/arista-netdevops-community/ansible-avd-cloudvision-demo/tree/master/inventory/intended/structured_configs">EOS structured configuration(YAML)</a></li>
<li><a href="https://github.com/arista-netdevops-community/ansible-avd-cloudvision-demo/tree/master/inventory/intended/configs">EOS configuration</a></li>
<li><a href="https://github.com/arista-netdevops-community/ansible-avd-cloudvision-demo/tree/master/inventory/documentation/">EOS Documentation</a></li>
<li><a href="https://github.com/arista-netdevops-community/ansible-avd-cloudvision-demo/tree/master/inventory/intended/structured_configs/cvp/cv_server.yml">CloudVision parameters</a></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Deploy EVPN/VXLAN Fabric</span>
$ ansible-playbook playbooks/dc1-fabric-deploy-cvp.yml --tags build

TASK <span class="o">[</span>eos_l3ls_evpn : Include device structured configuration, that was previously generated.<span class="o">]</span>
ok: <span class="o">[</span>DC1-SPINE1 -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-SPINE2 -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF1A -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF1B -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF2A -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF2B -&gt; localhost<span class="o">]</span>

TASK <span class="o">[</span>eos_l3ls_evpn : Generate EVPN fabric documentation in Markdown Format.<span class="o">]</span>
changed: <span class="o">[</span>DC1-SPINE1 -&gt; localhost<span class="o">]</span>

TASK <span class="o">[</span>eos_l3ls_evpn : Generate Leaf and Spine Point-To-Point Links summary in csv format.<span class="o">]</span>
changed: <span class="o">[</span>DC1-SPINE1 -&gt; localhost<span class="o">]</span>

TASK <span class="o">[</span>eos_l3ls_evpn : Generate Fabric Topology in csv format.<span class="o">]</span>
changed: <span class="o">[</span>DC1-SPINE1 -&gt; localhost<span class="o">]</span>

TASK <span class="o">[</span>eos_cli_config_gen : include device intended structure configuration variables<span class="o">]</span>
ok: <span class="o">[</span>DC1-SPINE1 -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-SPINE2 -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF1A -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF1B -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF2A -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF2B -&gt; localhost<span class="o">]</span>

TASK <span class="o">[</span>eos_cli_config_gen : Generate eos intended configuration<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF2A -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-SPINE1 -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF1A -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF2B -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-SPINE2 -&gt; localhost<span class="o">]</span>
ok: <span class="o">[</span>DC1-LEAF1B -&gt; localhost<span class="o">]</span>

TASK <span class="o">[</span>eos_cli_config_gen : Generate device documentation<span class="o">]</span>
changed: <span class="o">[</span>DC1-SPINE1 -&gt; localhost<span class="o">]</span>
changed: <span class="o">[</span>DC1-LEAF1A -&gt; localhost<span class="o">]</span>
changed: <span class="o">[</span>DC1-LEAF2A -&gt; localhost<span class="o">]</span>
changed: <span class="o">[</span>DC1-SPINE2 -&gt; localhost<span class="o">]</span>
changed: <span class="o">[</span>DC1-LEAF1B -&gt; localhost<span class="o">]</span>
changed: <span class="o">[</span>DC1-LEAF2B -&gt; localhost<span class="o">]</span>

PLAY <span class="o">[</span>Configuration deployment with CVP<span class="o">]</span>

TASK <span class="o">[</span>eos_config_deploy_cvp : generate intented variables<span class="o">]</span>
ok: <span class="o">[</span>cv_server<span class="o">]</span>

TASK <span class="o">[</span>eos_config_deploy_cvp : Build DEVICES and CONTAINER definition <span class="k">for</span> cv_server<span class="o">]</span>
changed: <span class="o">[</span>cv_server -&gt; localhost<span class="o">]</span>

TASK <span class="o">[</span>eos_config_deploy_cvp : Load CVP device information <span class="k">for</span> cv_server<span class="o">]</span>
ok: <span class="o">[</span>cv_server<span class="o">]</span>

PLAY RECAP
DC1-LEAF1A                 : <span class="nv">ok</span><span class="o">=</span><span class="m">5</span>    <span class="nv">changed</span><span class="o">=</span><span class="m">1</span>    <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span>    <span class="nv">failed</span><span class="o">=</span><span class="m">0</span> ...
DC1-LEAF1B                 : <span class="nv">ok</span><span class="o">=</span><span class="m">5</span>    <span class="nv">changed</span><span class="o">=</span><span class="m">1</span>    <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span>    <span class="nv">failed</span><span class="o">=</span><span class="m">0</span> ...
DC1-LEAF2A                 : <span class="nv">ok</span><span class="o">=</span><span class="m">5</span>    <span class="nv">changed</span><span class="o">=</span><span class="m">1</span>    <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span>    <span class="nv">failed</span><span class="o">=</span><span class="m">0</span> ...
DC1-LEAF2B                 : <span class="nv">ok</span><span class="o">=</span><span class="m">5</span>    <span class="nv">changed</span><span class="o">=</span><span class="m">1</span>    <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span>    <span class="nv">failed</span><span class="o">=</span><span class="m">0</span> ...
DC1-SPINE1                 : <span class="nv">ok</span><span class="o">=</span><span class="m">8</span>    <span class="nv">changed</span><span class="o">=</span><span class="m">4</span>    <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span>    <span class="nv">failed</span><span class="o">=</span><span class="m">0</span> ...
DC1-SPINE2                 : <span class="nv">ok</span><span class="o">=</span><span class="m">5</span>    <span class="nv">changed</span><span class="o">=</span><span class="m">1</span>    <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span>    <span class="nv">failed</span><span class="o">=</span><span class="m">0</span> ...
cv_server                  : <span class="nv">ok</span><span class="o">=</span><span class="m">3</span>    <span class="nv">changed</span><span class="o">=</span><span class="m">1</span>    <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span>    <span class="nv">failed</span><span class="o">=</span><span class="m">0</span> ...
</code></pre></div>
<p>All outputs are part of following folders:</p>
<ul>
<li>Intended YAML configuration: <strong><code>inventory/intended/structured_configs</code></strong></li>
<li>Intended EOS configuration files: <strong><code>inventory/intended/configs</code></strong></li>
<li>Documentation: <strong><code>inventory/documentation</code></strong></li>
</ul>
<h6 id="provision-cloudvision-server">Provision CloudVision Server<a class="headerlink" href="#provision-cloudvision-server" title="Permanent link">#</a></h6>
<p>Use tag <code>provision</code> to deploy configuration to CloudVision and prepare devices to be updated:</p>
<ul>
<li>Create configlets on CloudVision servers</li>
<li>Create containers on CloudVision using inventory structure</li>
<li>Move devices to containers</li>
<li>Attach configlets to devices.</li>
</ul>
<p>This tag does not execute any pending tasks. It is a manual action that can be done with a Change Control.
If you want to automatically deploy, just use <code>execute_tasks: True</code> in <code>eos_config_deploy_cvp</code> role.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Deploy EVPN/VXLAN Fabric</span>
$ ansible-playbook playbooks/dc1-fabric-deploy-cvp.yml --tags provision
</code></pre></div>
<h6 id="execute-pending-tasks-using-a-change-control">Execute Pending tasks using a change control<a class="headerlink" href="#execute-pending-tasks-using-a-change-control" title="Permanent link">#</a></h6>
<p>Go to <em>Provisioning &gt; Change Control</em> to create a new change control</p>
<p><img alt="Change Control Example" src="../../_media/figure-2-cloudvision-change-control.png" /></p>
<p>This change control is an example and you are free to build structure you want. In this scenario, all tasks can be run in parallel as we just rollout an EVPN/VXLAN fabric.</p>
<h3 id="analyze-result">Analyze result<a class="headerlink" href="#analyze-result" title="Permanent link">#</a></h3>
<p>Once devices rebooted, you can review fabric status on devices themselfs or on on CloudVision as well.</p>
<h5 id="topology-update">Topology Update<a class="headerlink" href="#topology-update" title="Permanent link">#</a></h5>
<p>Topology has been updated accordingly</p>
<p><img alt="Lab Topology" src="../../_media/cloudvision-device-topology.png" /></p>
<h5 id="configlet-list">Configlet list<a class="headerlink" href="#configlet-list" title="Permanent link">#</a></h5>
<p>A set of new configlets have been configured on CloudVision and attached to devices</p>
<p><img alt="Lab Topology" src="../../_media/cloudvision-deployed-configlet.png" /></p>
<h5 id="check-device-status">Check device status<a class="headerlink" href="#check-device-status" title="Permanent link">#</a></h5>
<p>To validate deployment, connect to devices and issue some commands:</p>
<h5 id="bgp-status">BGP Status<a class="headerlink" href="#bgp-status" title="Permanent link">#</a></h5>
<div class="highlight"><pre><span></span><code>DC1-LEAF1B#show bgp evpn summary
BGP summary information <span class="k">for</span> VRF default
Router identifier <span class="m">192</span>.168.255.4, <span class="nb">local</span> AS number <span class="m">65101</span>
Neighbor         V  AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc
  <span class="m">192</span>.168.255.1    <span class="m">4</span>  <span class="m">65001</span>             <span class="m">56</span>        <span class="m">66</span>    <span class="m">0</span>    <span class="m">0</span> <span class="m">00</span>:00:36 Estab   <span class="m">86</span>     <span class="m">86</span>
  <span class="m">192</span>.168.255.2    <span class="m">4</span>  <span class="m">65001</span>             <span class="m">55</span>        <span class="m">39</span>    <span class="m">0</span>    <span class="m">0</span> <span class="m">00</span>:00:44 Estab   <span class="m">86</span>     <span class="m">86</span>
</code></pre></div>
<h5 id="vxlan-address-table">VXLAN address table<a class="headerlink" href="#vxlan-address-table" title="Permanent link">#</a></h5>
<div class="highlight"><pre><span></span><code>DC1-LEAF1B#show vxlan  address-table
          Vxlan Mac Address Table
----------------------------------------------------------------------

VLAN  Mac Address     Type     Prt  VTEP             Moves   Last Move
----  -----------     ----     ---  ----             -----   ---------
<span class="m">1191</span>  0e1d.c07f.d96c  EVPN     Vx1  <span class="m">192</span>.168.254.5    <span class="m">1</span>       <span class="m">0</span>:00:04 ago
<span class="m">1192</span>  0e1d.c07f.d96c  EVPN     Vx1  <span class="m">192</span>.168.254.5    <span class="m">1</span>       <span class="m">0</span>:00:02 ago
<span class="m">1193</span>  0e1d.c07f.d96c  EVPN     Vx1  <span class="m">192</span>.168.254.5    <span class="m">1</span>       <span class="m">0</span>:00:04 ago
<span class="m">1194</span>  0e1d.c07f.d96c  EVPN     Vx1  <span class="m">192</span>.168.254.5    <span class="m">1</span>       <span class="m">0</span>:00:02 ago
<span class="m">1195</span>  0e1d.c07f.d96c  EVPN     Vx1  <span class="m">192</span>.168.254.5    <span class="m">1</span>       <span class="m">0</span>:00:02 ago
<span class="m">1196</span>  0e1d.c07f.d96c  EVPN     Vx1  <span class="m">192</span>.168.254.5    <span class="m">1</span>       <span class="m">0</span>:00:02 ago
<span class="m">1197</span>  0e1d.c07f.d96c  EVPN     Vx1  <span class="m">192</span>.168.254.5    <span class="m">1</span>       <span class="m">0</span>:00:04 ago
<span class="m">1198</span>  0e1d.c07f.d96c  EVPN     Vx1  <span class="m">192</span>.168.254.5    <span class="m">1</span>       <span class="m">0</span>:00:04 ago
<span class="m">1199</span>  0e1d.c07f.d96c  EVPN     Vx1  <span class="m">192</span>.168.254.5    <span class="m">1</span>       <span class="m">0</span>:00:02 ago
Total Remote Mac Addresses <span class="k">for</span> this criterion: <span class="m">9</span>
</code></pre></div>
<h5 id="check-device-connectivity">Check device connectivity<a class="headerlink" href="#check-device-connectivity" title="Permanent link">#</a></h5>
<p>Connect on server 01 and issue a ping to server 02.</p>
<div class="highlight"><pre><span></span><code>root@Server01:~# ping <span class="m">10</span>.1.10.12 -c <span class="m">5</span>
PING <span class="m">10</span>.1.10.12 <span class="o">(</span><span class="m">10</span>.1.10.12<span class="o">)</span> <span class="m">56</span><span class="o">(</span><span class="m">84</span><span class="o">)</span> bytes of ../_media.
<span class="m">64</span> bytes from <span class="m">10</span>.1.10.12: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span><span class="m">0</span>.033 ms
<span class="m">64</span> bytes from <span class="m">10</span>.1.10.12: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span><span class="m">0</span>.026 ms
<span class="m">64</span> bytes from <span class="m">10</span>.1.10.12: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span><span class="m">0</span>.021 ms
<span class="m">64</span> bytes from <span class="m">10</span>.1.10.12: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">4</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span><span class="m">0</span>.026 ms
<span class="m">64</span> bytes from <span class="m">10</span>.1.10.12: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">5</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span><span class="m">0</span>.034 ms

--- <span class="m">10</span>.1.10.12 ping statistics ---
<span class="m">5</span> packets transmitted, <span class="m">5</span> received, <span class="m">0</span>% packet loss, <span class="nb">time</span> 3998ms
rtt min/avg/max/mdev <span class="o">=</span> <span class="m">0</span>.021/0.028/0.034/0.004 ms
</code></pre></div>
<h4 id="revert-topology">Revert topology<a class="headerlink" href="#revert-topology" title="Permanent link">#</a></h4>
<p>Once demo is over, you can revert to previous stage:</p>
<ul>
<li>Reset devices to ZTP mode (Only devices part of the demo)</li>
<li>Remove configlet deployed previously</li>
<li>Remove dedicated container topology</li>
<li>Reboot devices</li>
</ul>
<p>Playbook: <a href="https://github.com/arista-netdevops-community/ansible-avd-cloudvision-demo/blob/master/playbooks/dc1-fabric-reset-cvp.yml"><code>dc1-fabric-reset-cvp.yml</code></a></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Reset EVPN/VXLAN Fabric tp ZTP</span>
$ ansible-playbook playbooks/dc1-fabric-reset-cvp.yml
</code></pre></div>
<blockquote>
<p>Revert will reset all devices to Factory default and ZTP mode !</p>
</blockquote>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../first-project/" title="Build your first AVD project" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Build your first AVD project
              </div>
            </div>
          </a>
        
        
          <a href="../lab-with-nat/" title="Use NAT to access eAPI" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Use NAT to access eAPI
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 - 2020 Arista Networks
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.c51dfa35.min.js"></script>
      <script src="../../../assets/javascripts/bundle.eaaa3931.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: ["instant"],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>